This section contains results about how models and the intersection pairing on them change after blowing up in a closed point of the special fiber.  

\begin{proposition}\label{prop:E_blowup_properties}
	Let $\mathscr C$ be a proper regular model of a curve $C$ and $x \in \mathscr C_s$ a closed point. 
	Let $p: \mathscr C' = \bl_x \mathscr C$ and $E$ be the exceptional divisor of the blowup. 
	Then $E \simeq \pro^{1}_{\kappa(x)}$ and \[
		\mathcal{O}(E)|_E = \mathcal{O}_E(-1), \quad E^2 = -[\kappa (x): k]
	.\] 
\end{proposition}
\begin{proof}
	That $E$ is isomorphic to $\pro^{1}_{\kappa x}$, and $\omega_{E / X} = \mathcal{O}(E)|_E = \mathcal{O}_E(-1)$ are standard theorems about blowups in regular points. 
	We still have to compute $E^2$. 
	\[
		E^2 = \deg_k \mathcal{O}_E(-1) = [\kappa(x): k] \deg_{\kappa (x)} \mathcal{O}_E(-1) = -[\kappa(x): k]
	.\] 
\end{proof}

These properties also precisely characterize a blowup, i.e.\ any irreducible components satisfying the conclusion of \cref{prop:E_blowup_properties}, can be ``blown-down'' to a regular model.
This is made precise in Castelnuovo's criterion. 

\begin{theorem}[Castelnuovo's criterion]\label{thm:castelnuovo}
	Let $\mathscr C$ be a proper regular model of a curve $C$.
	Let $E$ be a irreducible component of $\mathscr C_s$ and $k' = H^{0}(E, \mathcal{O}_E)$. 
	There exists a regular projective model $\mathscr C'$ and a closed point $x \in \mathscr C'$ such that $\mathscr C = \bl_x \mathscr C'$ with exceptional divisor $E$ if and only if $E \simeq \pro_{k'}^{1}$ and $E^2 = -[k': k]$. 
\end{theorem}
\begin{proof}
	One direction is exactly \cref{prop:E_blowup_properties}. 
	The other direction is long and technical so we refer the reader to \cite[sec.\ 9.3.1]{liuAlgebraicGeometryArithmetic2002}.
\end{proof}

\subsection{Strict normal crossings models} \label{sec:strict_normal_crossings_models}

\begin{definition}\label{def:strict_normal_crossings_divisor}
	Let $D$ be an effective Cartier divisor on a regular Noetherian scheme $X$. 	Let $x \in X$ be a closed point. 
	We say that $D$ has \emph{strict normal crossings at $x$ } if there are $f_1, \ldots, f_n \in \mathcal{O}_{X, x}$ with $n = \dim \mathcal{O}_{X, x}$ such that $\mathfrak{m} _x \mathcal{O}_{X, x} = (f_1, \ldots, f_n)$ and $\mathcal{O}(-D)_{x} = (f_1^{r_1}, \ldots, f_m^{r_m})$ for some $0 \le m \le n$ and $r_i \in \Z_{> 0}$. 

	We say $D$ has \emph{strict normal crossings} or $D$ is a \emph{strict normal crossings divisor} if $D$ has normal crossings at every closed point  $x \in X$. 

\end{definition}
\begin{definition}\label{def:normal_crossings_divisor}
	Moreover  $D$ has \emph{normal crossings} or $D$ is a \emph{normal crossings divisor} if $D$ satisfies the same condition as \cref{def:strict_normal_crossings_divisor}, but with $\mathcal{O}_{X, x}$ replaced by $\mathcal{O}_{X, x}^{\text{sh}}$, i.e.\ 
	the stalk in the Zariski topology is replaced by a stalk in the étale topology. 
\end{definition}
Normal crossings and strict normal crossings often get abbreviated as \gls{nc} or \gls{snc} respectively.
You should think of a normal crossings at $x$ as all components of $D$ meeting transversely at $x$. 
Strictness ensures that there are no crossings that are ``hidden in the Zarisky topology'' as they lay on the same component, but which do exist étale locally on a component, e.g.\ a node (see \cref{fig:normal_crossings_divisors}).

\begin{figure}[ht]
    \centering
    \incfig{normal-crossings-divisors}
    \caption{Recognizing (strict) normal crossings divisors}
    \label{fig:normal_crossings_divisors}
\end{figure}
\begin{definition}
	A \emph{(strict) normal crossings model} or \emph{(scn-model) nc-model}  of $X$ is a regular model $\mathscr X$ such that $\mathscr X_s = V(\pi) \subset  \mathscr X$ is a (strict) normal crossings divisor. 
\end{definition}

Strict normal crossings models are in some sense the least singular models, as they are regular, and the intersection points are as well behaved as we can hope for. 
The only step up would be semistable models (which we will introduce in \cref{sec:semistable_curves_and_models}) where we require that the special fiber is reduced, i.e.\ every component of the special fiber occurs with multiplicity 1. 
However these don't exist for every curve, whereas snc-models do.

We can recognize whether a model has normal crossings by looking at the intersections of irreducible components of the special fiber. 

\begin{proposition}
	A proper, regular model $\mathscr C$ of $C$ has strict normal crossings if and only if every non-regular $x \in \mathscr C_{s, \text{red}}$, belongs to exactly two irreducible components $F, G$ of $\mathscr C_s$ and $i_x(F, G) = 1$.  
\end{proposition}
\begin{proof}
	This is essentially \cite[prop.\ 9.1.8.(b)]{liuAlgebraicGeometryArithmetic2002} in our context of models. 

	\ltr Let $x \in \mathscr C_s$ be not smooth. 
	As the irreducible components are smooth, it follows that $x$ lies in multiple irreducible components, say $F_1, \ldots, F_r$, locally cut out by $f_1, \ldots, f_r$ with multiplicities $n_1, \ldots, n_r$. 
	By the definition of normal crossings this means that  $\mathscr C_s$ is locally cut out by the ideal $(f_1^{n_i}\cdots f_r^{n_r})$ with $r \le 3$. Hence  $r = 2$. 
	As by \cite[prop.\ 9.1.8.(b)]{liuAlgebraicGeometryArithmetic2002} we know that $i_x(F_1, F_2) = 1$. 

	\rtl Let's first argue that $\mathscr C_s$ is a normal crossings divisor and then argue that it is strict.
	Let $x \in \mathscr C_s$ a point. If $x$ is smooth in $\mathscr C_s$ then it belongs to a single irreducible component, which is regular at $x$. 
	Hence $\mathscr C_s$ is nc at $s$. 
	Suppose  $x$ is not smooth. Then it lays on the intersection of exactly two components $F, G$ with $i_x(F, G) = 1$ and the result follows from \cite[prop.\ 9.1.8.(b)]{liuAlgebraicGeometryArithmetic2002}.
	It also follows that $F, G$ are regular at $x$.
\end{proof}

\begin{theorem}\label{thm:desingularisation}
	Let $\mathscr C$ be a regular projective model of a curve $C$.
	Then there exists a snc-model $\mathscr C'$ of $C$ with dominating morphism of models $\mathscr C' \to \mathscr C$. 
	Moreover $\mathscr C'$ can be chosen to be the minimal snc-model dominating $\mathscr C$. 
	Then $\mathscr C'$ is called the \emph{minimal desingularisation of $\mathscr C$}. 
\end{theorem}
\begin{proof}
	This follows from embedded resolution. 
	The idea is to repeatedly blow up points in $\mathscr C$ to make all irreducible components regular, and all intersections normal crossings. 
	See \cite[sec.\ 9.2.4]{liuAlgebraicGeometryArithmetic2002} for more details.
	That a minimal desingularisation exists is the content of \cite[prop.\ 9.3.32]{liuAlgebraicGeometryArithmetic2002}.
\end{proof}
Via the factorization theorem we also see that this desingularisation can be obtained via finite sequence of blowups in closed points. 
In \cref{fig:snc_model_curve_type_ii} we illustate this with the minimal regular model of an elliptic curve of reduction type II. 
The reduction types of elliptic curves will be discussed in \cref{chap:kodaira_neron_classification_of_elliptic_curves}.

\begin{figure}[ht]
    \centering
    \incfig{snc-model-curve-type-ii}
    \caption{Blowing up points in the special fiber of the minimal regular model of an elliptic curve of type II, until as snc-model is obtained. 
    For every step the blue point is the point where we blow up, and the red component is the exceptional divisor. }
    \label{fig:snc_model_curve_type_ii}
\end{figure}


\begin{lemma}\label{lem:blowup_snc}
	Let $\mathscr C$ be a snc-model of a curve $C$, and $x$ a closed point in $\mathscr C_s$. 
	Then $\bl_x\mathscr C$ is an snc-model of $C$. Let $E$ be the exceptional divisor. 
	Moreover 
	\begin{enumerate}
		\item if $x$ is a regular point on $\mathscr C_{s, \text{red}}$ laying on the irreducible component $F$ with multiplicity $n$, then $E$ is a rational curve of multiplicity $n$ intersecting $\tilde F$ in one point. 
		\item If $x$ is an intersection point laying on two irreducible components $F, G$ with multiplicity  $m, n$ respectively, then $E$ is a rational curve of multiplicity $n + m$ intersecting $\tilde F, \tilde G$ in 1 point each. 
	\end{enumerate}
	Here $\tilde F$ denotes the strict transform of $F$. 
	See \cref{fig:blowup-snc}
\end{lemma}
\begin{proof}
	As the components are smooth we have $\mu_x(F_i) = 1 $ for every closed point $x \in \mathscr C_s$ and irreducible component  $F$ containing $x$. 
	Then the result is exactly \cite[exercise 9.2.9(a)]{liuAlgebraicGeometryArithmetic2002}.
\end{proof}
\begin{figure}[ht]
    \centering
    \incfig{blowup-snc}
    \caption{Blowing up snc-models in a smooth point (left) and intersection point (right)}
    \label{fig:blowup-snc}
\end{figure}




\begin{theorem}\label{thm:minimal_snc_model}
	Let $C$ be a curve with  $g(C) > 0$, then $C$ has a minimal snc-model $\mathscr C_\text{min} $, i.e.\ any snc-model $\mathscr C$ dominates $\mathscr C_\text{min} $. 
\end{theorem}
\begin{proof}
	See \cite[prop.\ 9.3.36]{liuAlgebraicGeometryArithmetic2002}.
\end{proof}

