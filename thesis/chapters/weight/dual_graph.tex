In the previous section we saw that given a normal model $\mathscr X$ of $X$, we can find divisorial points in $X\an$ that correspond to the irreducible components on the special fiber.  
Moreover, if $\mathscr X$ is an snc-model, then we can find interpolations of these divisorial points along these intersections. 
These will be the \emph{monomial points} and they generalize divisorial points.  
We will sketch the construction of these monomial points and why they are useful in the context of curves. 

\subsection{The dual graph of a model of a curve} \label{sec:the_dual_graph_of_a_model_of_a_curve}
\begin{definition}
	Let $\mathscr C$ be a snc-model of a curve $C$.
	Let $F_1, \ldots, F_r$ be the irreducible components in the special fiber, occurring with multiplicity $N_1, \ldots, N_r$ respectively. 
	Then the \emph{dual graph of $\mathscr C$}, written $\Delta(\mathscr C)$, is the graph with vertices $V = \{F_i\}_{i = 1}^{r} $ and the edges between $F_i, F_j$ are the intersection points of $F_i$ with $F_j$. 
\end{definition}
As the model is snc, the intersection number in an intersection point is  $1$. 
So if $i \ne j$ then $F_i$ and $F_j$ are connected by $F_i \cdot F_j$ edges in $\Delta(\mathscr C)$. 
\begin{example}\label{ex:first_dual_graph}
	\begin{enumerate}
		\item Consider an elliptic curve $E$ over $K$ of reduction type $\mathrm I_2$ and let $\mathscr E$ be the minimal snc-model, which incidentally is the same as the minimal regular model. 
			Then the dual graph $\Delta(\mathscr E)$ consists of two points and two edges between them.
		\item Let $\mathscr P$ be the model of $\pro_K^{1}$ from \cref{ex:first_model}. 
			The dual graph consists of two points connected by one edge.  
		\item Let $E'$ be again an elliptic curve, this time of reduction type $\mathrm I_3^*$. 
			And let $\mathscr E'$ be its minimal regular model (which is snc). 
			Then the dual graph has the shape of an H. See \cref{fig:example_dual_graph}.

	\end{enumerate}
\end{example}

\begin{figure}[h]
    \centering
    \incfig{example-dual-graph}
    \caption{The models and dual graphs from \cref{ex:first_dual_graph}}
    \label{fig:example_dual_graph}
\end{figure}

We can equip the dual graph $\Delta(\mathscr C) $ with extra information. 
To every vertex (i.e.\ irreducible component  $F$ of $\mathscr C_s$) we attach the pair $(N(F), g(F))$ consisting of the multiplicity of $F$ and in $\mathscr C_s$ and the genus of $F$ as a $k$-curve with reduced scheme structure. 
So in the third example in \cref{fig:example_dual_graph} the points $G_1, \ldots, G_4$ would be labeled with $(1, 0)$ and $F_1, \ldots, F_4$ with $(2, 0)$. 

With this extra structure we can define a metric on  $\Delta(\mathscr C)$.
\begin{definition}\label{def:metric_dual_graph}
Let $e$ be an edge connecting $F_i, F_j$, which are irreducible components of multiplicity $N_i, N_j$ respectively. 
Then we define the \emph{length of $e$ }  \[
	\ell(e) = \frac{1}{\lcm (N_i, N_j)}
.\] 
\end{definition}

This allows us to turn $\Delta(\mathscr C)$ into into a metric space by having the vertices $v_i$ be points and for every edge  $e$ connecting $v_i, v_j$ we glue the interval $[0, \ell(e)]$ (a metric space of length $\ell(e)$) along the end points to $v_i, v_j$. 
The metric on $\Delta(\mathscr C)$ is then given by the shortest path metric. 
So $\Delta(\mathscr E )$ from \cref{fig:example_dual_graph} would be a circle of length 2 and $\Delta (\mathscr P)$ a line of length $1$. 
But the line connecting $F_1, F_2$ in $\Delta(\mathscr E')$ would only be $1 /2$ long. 
\begin{definition}
	The metric/topological space described above is written as $|\Delta(\mathscr C)|$. 
\end{definition}

\subsection{The skeleton: embedding the dual graph into $C^{\mathrm{an}}$}\label{sec:skeleton}
The following theorem is the main reason why snc-models are useful when studying Berkovich geometry. 
\begin{theorem}
	Let $\mathscr C$ be a snc-model of a curve $C$. 
	Then there is a natural embedding \[
		\sk_{\mathscr C}:|\Delta(\mathscr C)| \into \mathscr C\an
	,\]
	such that for any irreducible component $F$ of $\mathscr C_s$,  $\sk_{\mathscr C}(F)$ is the divisorial point associated to $F$. 
\end{theorem}
\begin{proof}
	A rigorous proof can be found in \cite[3.1.4]{mustataWeightFunctionsNonArchimedean2015}.
	We will give a sketch of the argument. 
	Let $\mathscr C = \sum_{i= 1}^{r} N_i F_i$ be the decomposition into irreducible components. 
	We know what the images of the vertices $F_1, \ldots, F_r$ of $\Delta(\mathscr C)$ must be.
	What is missing is the map on the edges. 

	Let $e$ be an edge connecting vertices $F_i, F_j$. 
	Recall that $e$ corresponds to an intersection $\xi \in \mathscr C_s$ that belongs to both to $F_i$ and $F_j$. 
	The idea is construct a family of norms/valuations on $\mathscr \mathcal{O}_{\xi, \mathscr C}$ that interpolate between the divisorial points associated to $F_i, F_j$. Then we can extend these norms the faction field $K(C)$. 

	Let $t_i, t_j$ be local equations cutting out $F_i, F_j$ in a neighborhood of  $\xi$. 
	Then $t_i, t_j$ are a regular system generating the maximal ideal of $\mathcal{O}_{\xi, \mathscr C}. $ 
	They satisfy \[
		t_i ^{N_i} t _j^{N_j} = u\cdot \pi
	\] 
	where $u$ is unit in $\mathcal{O}_{\xi, \mathscr C}$, as $\pi$ (the uniformiser) cuts out $F_i, F_j$ with multiplicity $N_i, N_j$ respectively.  
	Let $0 \le \alpha_i \le 1 / N_i,   0 \le \alpha_j \le 1 / N_j$ be real numbers such that \begin{equation}\label{eq:barycentic_alphas}
		N_i\cdot \alpha_i + N_j \cdot \alpha_j = 1
	.\end{equation}
	
	Now we can define a norm on $\mathcal{O}_{\xi, \mathscr C}$. 
	Let  $f$ be any function in $\mathcal{O}_{\xi, \mathscr C}$. 
	Considering $f$ as a element in the completion $\hat{\mathcal{O}_{\xi, \mathscr C}}$ we can write $f$ as power series expansion in $t_i, t_j$  \[
		f = \sum_{\ell, m}^{} a_{\ell, m} t_i ^{\ell} t_j^{m}
	.\] 
	On this power series we can define a valuation similar to the valuation we defined  for affinoid algebras as \[
		v_{\alpha_i, \alpha_j}(f) = \inf_{\alpha_{\ell, m} \ne 0}{\alpha_i \ell + \alpha_j m}
	.\] 
	One can show that this does not depend the chosen power series expansion and that it is a well defined valuation. 
	As we required \eqref{eq:barycentic_alphas} we have that  $v_{\alpha_i, \alpha_j}(\pi) = 1$ so this valuation extends the valuation on $K$. 
\end{proof}
\begin{definition}
	Let $\mathscr C$ be a snc-model of a curve $C$. 
	Then the \emph{skeleton} associated to $\mathscr C$ is the image of the of the embedding $|\Delta(\mathscr C)|$ in $C\an$. 
	\[
		\sk(\mathscr C) = \im \sk_{\mathscr C}
	.\] 
\end{definition}
\begin{definition}
	The points that are in the skeleton $\sk(\mathscr C)$ of some snc-model $\mathscr C$ are called \emph{monomial points}. 
	The set of monomial points in $C\an$ is written as  $C^{\text{mon}}$. 
\end{definition}

So our different types of points have the following relations \[
C^{\text{div}} \subset C^{\text{mon}} \subset C\bir \subset C\an \supset C_\text{cl}
.\] 

\begin{remark}
	It is possible to generalize this construction to higher dimensional varieties. 
	The dual graph has to be replaced by a dual complex and the monomial points must interpolate between more divisorial points along a simplex.
	This is worked out in detail in \cite{mustataWeightFunctionsNonArchimedean2015}. 
	However, we will only need the theory for curves. 
\end{remark}

\begin{example}
	Let $\mathscr P$ be the model of $\pro^{1}_K$ from \cref{ex:first_model}, whose dual graph we studied in \cref{ex:first_dual_graph}.
	An explicit calculation shows that the divisorial points correspond to the supremum norms on the disks $B(0, 1), B(0, |\pi|)$ (recall our description of the Berkovich affine/projective line in \cref{sec:the_berkovich_affine_line}).
	Then the monomial points that interpolate between these norms, are the norms $B(0, r)$ with $|\pi| \le r \le 1$.
	So the dual graph $|\Delta(\mathscr P)|$ embeds in $\pro_K^{1, \text{an}}$ as part of the line $l_0: r \mapsto B(0, r)$. 
	See \cref{fig:skeleton_projective_line}. 
\end{example}
\begin{figure}[ht]
    \centering
    \incfig{skeleton-projective--line}
    \caption{The dual graph of the model $\mathscr P$ from \cref{ex:first_model} embedding into $\pro_K^{1, \text{an}}$ as a skeleton.}
    \label{fig:skeleton_projective_line}
\end{figure}


\subsection{Dual graphs, skeleta and blowups} \label{sec:dual_graphs_and_blowups}
We can study how the dual graphs of models behave under blowing up the points of the special fiber.
Essentially this is translating \cref{lem:blowup_snc} to the language of dual graphs.
Let $x$ be a closed point in the special fiber, $\mathscr C' = \bl_{x} \mathscr C$ the blowup, and $E$ be the exceptional divisor in $\mathscr C'$.

We first consider what happens if $x $ is a smooth point of $\mathscr C_s$. 
Let $F$ be the irreducible component of $\mathscr C_s$ that contains $x$ and let $N$ be the multiplicity of $F$. 
Then $E$ is a rational curve of multiplicity $N$, which only intersects $\tilde F$ in one point. 
The strict transforms of the components in $\mathscr C$ all intersects each other in the same way in $\mathscr C'$. 
So in the dual graph we have to add one vertex $E$ labeled $(N, 0)$ (multiplicity and genus) which is connected to $F$ by one edge.

There are two natural maps between $|\Delta(\mathscr C)|$ and $|\Delta(\mathscr C')|$. 
\[
\begin{tikzcd}
	{|\Delta(\mathscr C')|} \rar[hookleftarrow, shift left]{i} \rar[twoheadrightarrow, shift right, ']{r} & {|\Delta(\mathscr C)|} 
\end{tikzcd}
.\] 
An isometric inclusion $i$ and a deformation retraction $r$ that retracts the edge between  $E$ and $F$. 
Note that $r \circ i = \id_{|\Delta(\mathscr C)|}$ and that the maps are a homotopy equivalence. 
See \cref{fig:blowup_smooth_point_skeleton}. 

\begin{figure}[ht]
    \centering
    \incfig{blowup-smooth-point-skeleton}
    \caption{The dual graph after blowing up in a smooth point on the special fiber of an snc-model. }
    \label{fig:blowup_smooth_point_skeleton}
\end{figure}

\begin{remark}
	Blowing up $ F$ in another point $x'$ results in an extra edge on the dual graph. 
	Embedding this in $C\an$, this edge lays in another tangent direction at$F$ in $C\an$. 
	So we see that every closed point  on  $F$ gives a tangent direction at the divisorial point $F$. 
	With the theorem we see later, we see that conversely every tangent direction also corresponds to a closed point on $F$. 
	This is illustrated in \cref{fig:blowup_smooth_point_skeleton}.
\end{remark}


\medskip

We now consider what happens if $x$ is an intersection point of $\mathscr C$. 
Let $F, G$ be the components that contain $x$, of multiplicity $M, N$ respectively. 
Then the strict transforms $\tilde F, \tilde G$ no longer intersect in $x$, but they both intersect the exceptional divisor $E$ in one point. 
Recall that $E$ is a rational curve of multiplicity $M + N$ (\cref{lem:blowup_snc}). 
So in the dual graph $\Delta(\mathscr C')$ the edge $e$ between $F, G$ corresponding to $x$ is replaced by an edge $e_1$, from $F$ to $E$ and an edge $e_2$ from $E$ to $G$. 
Note that \[
	\ell(e) = \frac{1}{\lcm(M, N)} = \frac{1}{\lcm(M, M + N)} + \frac{1}{\lcm(M+ N, N)} = \ell(e_1) + \ell(e_2)
.\]  
So in the dual graph we have put an extra vertex on the edge $e$, turning it into two edges, while keeping the total length the same.
See \cref{fig:blowup_intersection_points_skeleton}. 
So again we find an isometry $i$ and a retraction $r$
\[
\begin{tikzcd}
	{|\Delta(\mathscr C')|} \rar[hookleftarrow, shift left]{i} \rar[twoheadrightarrow, shift right, ']{r} & {|\Delta(\mathscr C)|} 
\end{tikzcd}
.\] 
In this case the retraction is just the inverse as $i$ is actually an isomorphism. 

\begin{figure}[ht]
    \centering
    \incfig{blowup-intersection-poins-skeleton}
    \caption{The dual graph after blowing up in an intersection point on the special fiber of an snc-model. }
    \label{fig:blowup_intersection_points_skeleton}
\end{figure}

Now let $f:\mathscr C' \to \mathscr C$ be any dominating map between snc-models of $C$. 
By the factorization theorem \cref{thm:factorisation_theorem} we find that $f$ can be decomposed by a sequence of blowups in closed points. 
\[
\mathscr C' = \mathscr C_n \to \mathscr C_{n-1} \to \ldots \to \mathscr C_0 = \mathscr C
.\] 
With corresponding isometric inclusions and retractions 
\[
\begin{tikzcd}
	{|\Delta(\mathscr C_{j})|} \rar[hookleftarrow, shift left]{i_j} \rar[twoheadrightarrow, shift right, ']{r_j} & {|\Delta(\mathscr C_{j-1})|} 
\end{tikzcd}
.\] 
Composing these inclusions and retractions we find the following proposition
\begin{proposition}\label{prop:inclusion_retraction_dual_graph}
	Let $f:\mathscr C' \to \mathscr C$ be any dominating map between snc-models of a curve $C$. 
	Then there is a natural isometric inclusion $i$ and deformation retraction $r$
\[
\begin{tikzcd}
	{|\Delta(\mathscr C')|} \rar[hookleftarrow, shift left]{i} \rar[twoheadrightarrow, shift right, ']{r} & {|\Delta(\mathscr C)|} 
\end{tikzcd}
,\] 
	which are homotopy equivalences
\end{proposition}

The inclusion $i: |\Delta(\mathscr C)| \into |\Delta(\mathscr C')|$ is compatible with the embedding into $C\an$, which we make precise in the following theorem. 
\begin{proposition}
	Let $f:\mathscr C' \to \mathscr C$ be any dominating map between snc-models of a curve $C$ and $i$ the inclusion $i: |\Delta(\mathscr C)| \into |\Delta(\mathscr C')|$. 
	Then the following diagram commutes \[
	\begin{tikzcd}
		& C\an \\
		{|\Delta(\mathscr C)|} \ar[hookrightarrow]{ur}{\sk_{\mathscr C}}
\ar[hookrightarrow]{rr}{i} & & {|\Delta(\mathscr C')|} \ar[hookrightarrow]{ul}[']{\sk_{\mathscr C'}}
	\end{tikzcd}
	.\] 
	In particular there is an inclusion of skeleta $\sk(\mathscr C) \subset  \sk(\mathscr C')$, which is compatible with the metrics and $\sk(\mathscr C)$ is a deformation retract of  $\sk(\mathscr C')$. 
\end{proposition}

By the previous proposition all the results we have about $|\Delta(\mathscr C)|$ actually also work with  $\sk(\mathscr C)$. 
\todo{this is not very precise language}

\begin{corollary}
	Let $C$ be a curve with  $g(C) > 0$, $\mathscr C$ any snc-model of $C$ and $\mathscr C_\text{min} $ the minimal snc-model. 
	Then there is an isometric inclusion $i$ and deformation retraction $r$
\[
\begin{tikzcd}
	\sk(\mathscr C ) \rar[hookleftarrow, shift left]{i} \rar[twoheadrightarrow, shift right, ']{r} & \sk(\mathscr C_\text{min} ) 
\end{tikzcd}
.\] 
In particular $\sk(\mathscr C_\text{min} )$ has the same homotopy type as every other skeleton of $C$. 
\end{corollary}
\begin{proof}
	This is \cref{prop:inclusion_retraction_dual_graph} together with \cref{thm:minimal_snc_model}.
\end{proof}

\subsection{Skeleta span $C^{\mathrm{an}}$} \label{sec:skeleta_span_C_an}

In the previous sections we have seen that snc-models of $C$ give pieces (skeleta) of $C\an$. 
If we want to use these models to understand the geometry of $C\an$ it is desirable that we can obtain all or most of $C\an$ by looking at skeleta. 
This is the case and is made precise in the following proposition. 
\begin{proposition}\label{prop:skeleta_curve_limits}
	Let $C$ be a curve. Then 
	\begin{align*}
		\mathbb H(C) &= \bigcup_{\mathscr C \text{ snc-model}} \sk(\mathscr C) \\
		C\an &= \varprojlim_{\mathscr C \text{ snc-model}} \sk(\mathscr C)
	,\end{align*}
	where $\mathbb{H}(C)$ as a set are the type 2 and 3 points of $C\an$ and the inverse limit is taken over the ordered system of snc-models of $C$ and the maps are the deformations retractions from \cref{prop:inclusion_retraction_dual_graph}.
\end{proposition}
\begin{proof}
	See \cite[§2.2.2 and  lem.\ 2.3.2]{bakerWeightFunctionsBerkovich2016}
\end{proof}
\begin{remark}
	While $\mathbb{H}(C)$ and $C\an$ are almost the same set, their topologies are different. 
	The difference comes down to the following. 
	Let $x$ be a branch point (i.e.\ divisorial/type 2 point).
	Then a neighborhood $U \subset C\an$ of $x$ must entirely contain all but finitely many branches, whereas a neighborhood $V \subset \mathbb{H}(C)$ must just be an open when restricted to any skeleton $\sk(\mathscr C)$ (a finite graph). 
\end{remark}

The union in \cref{prop:skeleta_curve_limits} is actually a direct limit over the same ordered system of snc-models, but the maps here are the inclusions. 
As these inclusions are isometries, the metrics on the skeleta $\sk(\mathscr C)$ induce a metric on $\mathbb{H}(C)$, which is called the \emph{stable metric}. 

\begin{remark}
	The \emph{stable metric} is not the only metric on $\mathbb{H}(C)$. 
	In \cite{bakerWeightFunctionsBerkovich2016} they define another but similar metric, the \emph{potential metric} which seems to be better suited to some applications. 
\end{remark}

\begin{remark}
	The stable metric does not generalize to analytification of higher dimensional varieties. 
	On a 1-dimensional topological space, a path metric is equivalent to giving a measure. 
	So saying that $\mathbb{H}(C)$ is a metric space is slightly misleading as it is in fact the measure that generalizes to higher dimensions. 
\end{remark}

Let $C$ be a curve and $\mathscr C$ be a snc-model of $C$. 
As $C\an$ is a filtered limit of spaces which when large enough retract to $\sk(\mathscr C)$ (\cref{prop:skeleta_curve_limits,prop:inclusion_retraction_dual_graph}), the following theorem is believable, albeit not entirely trivial to prove. 
\begin{proposition}\label{prop:retract_analytification_skeleton}
	Let $\mathscr C$ be a snc-model of a curve $C$. 
	Then there is a deformation retract $\rho_{\mathscr C}: C\an \to \sk(\mathscr C)$. 
	\question{is this actually a deformation retraction, or just a retraction? 
	It must be a deformation retract, otherwise the inclusion would not be a homotopy equivalence. }
\end{proposition}
\begin{proof}
	See \cite[§2.2.2]{bakerWeightFunctionsBerkovich2016}.
\end{proof}

The metric induces a piecewise affine linear structure on $\mathbb{H}(C)$. 
\begin{definition}
	Let $f: \mathbb{H}(C) \to \R$ be a function. 
	Then $f$ is \emph{piecewise linear} $f \circ \sk_{\mathscr C}: |\Delta(\mathscr C)| \to \R$ is piecewise linear on every edge of $ \Delta(\mathscr C)$ for every snc-model $\mathscr C$. 
	We say that $f$ is \emph{$\Z$-affine linear} (resp.\ \emph{$\Q$-affine linear}) if moreover the slopes $f \circ \sk _{\mathscr C}$ are in $\Z $ (resp.\ $\Q$).
\end{definition}



